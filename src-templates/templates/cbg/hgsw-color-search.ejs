<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <base href="/">
  <title>HGSW Color Search</title>
</head>

<body style="margin: 0; background-color: rgba(0, 0, 0, 0.5);">

<div
  id="prism-color-search-embed-root"
  data-prism-facet="ColorSearchFacet"
  data-brand="hgsw"
  data-color-wall-bg-color="#FFF"
  data-language="en-US"
  data-route-type="memory"
></div>

<script src="<%= BASE_PATH %>/embed.js"></script>
<script>
  (() => {
    const baseHostUrl = window.location.origin
    const kebabCase = (string) => string.replace(/[\W_]+/g, '-')
    window.PRISM.embed(document.getElementById('prism-color-search-embed-root'), {
      colorDetailPageRoot: (color) => `${baseHostUrl}/inspiration/colors/${color.colorFamilyNames[0]}/${kebabCase(color.name)}-hgsw-${color.colorNumber}`.toLowerCase(), // example
      colorWallPageRoot: ({ brandKey, colorNumber }) => `${baseHostUrl}/prism-templates/templates/cbg/hgsw-qr-color-wall.html#/color-locator/${brandKey}${colorNumber}`,
      bindCallback: ({ publish, subscribe }) => {
        subscribe('prism-close-color-search', () => {
          console.info({ event: 'prism-close-color-search' })
          // host site should control component display state
        })
      }
    })
  })()
</script>

</body>

</html>
